<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="we.are.Mapper.OrderMapper">

	<!-- 발주 등록 insert 쿼리문 -->
	<insert id="balju_insert">
		insert into orders(uuid, bnumber, bname, bproduct, bcount, bsum, pprice,
		pcode)
		values(UUID_SHORT(),#{bnumber}, #{bname}, #{bproduct}, #{bcount}, #{bsum}, #{pprice} ,#{pcode});
	</insert>

	<!--제품 리스트 -->
	<select id="product_select"
		resultType="we.are.Model.InventoryDTO">
		select * from product;
	</select>

	<!-- 발주 목록 리스트 -->
	<select id="balju_select" resultType="we.are.Model.OrderDTO">
		select * from orders;
	</select>
	
	<!--거래처 목록 리스트 -->
	<select id="company_select" resultType="we.are.Model.CompanyDTO">
		select * from company;
	</select>

	<update id="suju_update">
		update orders set sujuday = current_date(), sujubox = "발 행" where bno =
		#{bno};
	</update>
	
	<!-- 수주내역 날짜별 검색 -->
	<select id="daysearch" resultType="we.are.Model.OrderDTO">
	SELECT * FROM orders WHERE baljuday BETWEEN #{startday} AND #{endday};
	</select>






	<!-- DTO 2개를 합쳐서 JOIN으로 검색된 값을 넣기 위한 쿼리문. -->
	<!-- <resultMap type="we.are.Model.SujuDTO" id="SujuDTO"> 4. resultMap="SujuDTO"로 
		검색된 id="SujuDTO"에 연결 "we.are.Model.SujuDTO" 위치에 값을 저장함. -->
	<!-- <result column="spayment" property="spayment" /> -->
	<!-- <result column="sdelivery" property="sdelivery" /> -->
	<!-- </resultMap> -->

	<!-- <resultMap type="we.are.Model.BaljuDTO" id="Balju">2. resultMap="Balju"로 
		검색된 id="balju"에 연결 "we.are.Model.BaljuDTO" 위치에 값을 저장함 -->
	<!-- <result column="bno" property="bno" /> -->
	<!-- <result column="baljuday" property="baljuday" /> -->
	<!-- <result column="bnumber" property="bnumber" /> -->
	<!-- <result column="bname" property="bname" /> -->
	<!-- <result column="bproduct" property="bproduct" /> -->
	<!-- <result column="bcount" property="bcount" /> -->
	<!-- <result column="bsum" property="bsum" /> -->
	<!-- <result column="pprice" property="pprice" /> -->
	<!-- <collection property="SujuDTO" resultMap="SujuDTO" /> 3. collection을 
		이용하여 더 할 값을 검색 resultMap="SujuDTO"로 이동 -->
	<!-- </resultMap> -->


	<!-- <select id="balju_select" parameterType="String" resultMap="Balju"> 
		1. db의 select 값을 parameterType string타입으로 전송 > resultMap="Balju"으로 이동 -->
	<!-- select a.bno, a.baljuday, a.bnumber, a.bname, a.bproduct, a.bcount, 
		a.bsum, b.sdelivery, b.spayment, a.pprice from balju a left join suju b on 
		a.bno = b.bno; -->
	<!-- </select> -->

</mapper>